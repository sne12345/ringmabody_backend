<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">
</head>
<style>
.btn{
background-color: rgb(123, 227, 251);
color:white;
border:none;
}
#classImg{
width:500px;
height:300px;
}
</style>
<body>
<div align="center" class="mb-5">
        <h2 class="font-weight-bold">기구필라테스 - 내 몸의 균형 찾아가기</h2>
</div>

<div class="container">
    <div class="row align-items-center">
        <div class="col-md-6 mb-5">
            <img id="classImg" th:src="@{/resources/images/} + ${findClass.img}"  alt="Image" class="img-fluid"> 
        </div>

        <div class="col-md-5 ml-auto">
            <div align="right">
                <p>
                    <span th:text="|작성자 : ${findClass.teacher_id}|">작성자 : 송카은</span><br/>
                    <span th:text="|작성일 : ${#dates.format(findClass.sdate, 'yyyy-MM-dd')}">작성일 : 2021-2-2</span><br/>
                    <span th:text="|조회수 : ${findClass.hit}|">조회수 : 4</span>
                </p>
            </div><br/>

            <h5 th:text="${findClass.categoryName}">카테고리 :  헬스</h5>
            <h5><i class="xi-calendar"></i> : 
            <span th:text="|~ ${#dates.format(findClass.edate, 'yyyy-MM-dd')}|">~2021-06-02</span></h5>
            <h5><i class="xi-maker"></i> :
            <span th:text="|${findClass.place}|">: 경기도 성남시 분당구 수내2동 63-2</span> </h5>
            <h5><i class="xi-user"></i> :
            <span th:text="|${findClass.minNum}명|">7명</span> ~ <span th:text="|${findClass.maxNum}명|">20명</span>
            </h5>
            <h5 th:text="|현재 참여자 수 : ${findClass.participant}명|">현재 참여자 수 :  8명</h5><br/>
            <h5 th:text="|${findClass.state}|">남은 시간 :  마감되었습니다.</h5><br/>
            <h4><i class="xi-credit-card"></i>&nbsp;
            <span th:text="|${findClass.price}원|">20000원</span></h4>
            <br />

            <form name="form" action="" method="GET">
<!--                 <button class="btn"><span class="xi-minus-thin"></span></button>
                <input style="text-align:center;" value=0 type="text" name="count"/>
                <button class="btn"><span class="xi-plus-thin"></span></button> -->
                <button class="btn"><span class="xi-cart-o"></span></button>
                <span th:unless="${findClass.state eq '마감'}">
                	<input class="btn" type="button" onclick="" value="신청하기" />
                </span>
                <span th:if="${findClass.state eq '마감'}">
                	<input class="btn" type="button" onclick="" value="신청하기" disabled />
                </span>
                <!-- if문 이용해서 마감일 지나면 신청하기는 disabled로 -->
            </form>
            <br/><br/>

        </div>
    </div>

    <br/><br/>
    <div>
        <h5>수업 소개</h5><br/>
        <p th:text="|${findClass.content}|">dddddddddddddddddddddd4dddddddddddddddddddddddddddddddddddddddddddd</p><br/><br/>
        <h5>강사 정보</h5><br/>
        <div>
           <!--  <img src="teacher1.jpg" class="rounded-circle" style="width:200px;height:200px;float:left;margin-right:20px;"> -->
<<<<<<< HEAD
            <span>이름 : 송카은</span><br/><br/>
            <p>안녕하세요, 필라테스 강사 송카은입니다.</p>
=======
            <span th:text="${findClass.teacher_name}">이름 : 송카은</span><br/><br/>
            <p th:text="${findClass.teacher_desc}">안녕하세요, 필라테스 강사 송카은입니다.</p>
>>>>>>> d295f553c654699841363203db602a9f9811a67d
        </div>
    </div>

    <br/><br/><br/>

    <div style="clear:left;" class="form-group" align="right">
        <a th:attr="onclick=|updateClass(${findClass.class_id})|" class="btn py-2 px-4">수정</a>
    	<a th:attr="onclick=|deleteClass(${findClass.class_id}, ${findClass.participant})|" class="btn py-2 px-4" onClick="del(3);">삭제</a>
        <a class="btn py-2 px-4" onclick="list();">목록</a>
    </div>

</div>
<script>
/* function del(class_id) {
	var chk = confirm("정말 삭제하시겠습니까?");
	if (chk) {
		$.ajax({
			url : '/class/delete' + class_id,
			type : 'delete',
			async : false,
			success : function(data) {
				if (data == "success") {
					location.href = "/class/viewList";
				}
			},
			error: function(request,status,error){
		        alert("삭제할 수 없습니다.");
		    }
		});
	}
}  */
function updateClass(g) {
	if (confirm("수업을 수정하시겠습니까?")) {
		location.href= "/class/writeClass?class_id=" + g;
	} 
	
}
function deleteClass(g, participant) {
	var con = confirm("수업을 삭제하시겠습니까?");
	if (con == true && participant > 0) {
		alert("참여자가 있으므로 삭제할 수 없습니다.");
		return;
	} 
	else if (con == true && participant <= 0){
		location.href= "/class/deleteClass?class_id=" + g;
	}
	else
		return;

	return;
}

/* $('#updateClass').on('click', function(e) {
	e.preventDefault();
	var url = "/class/writeClass";
	url = url + "?class_id=" + $('#keyword').val();

	location.href = url;
}); */
	function list(){
		location.href="/class/viewList";
	}
</script>
</body>
</html>